<h1 class="page-header"><i class="glyphicon glyphicon-dashboard"></i> Dashboard</h1>

<div class="row">
    <form enctype="multipart/form-data" name="form" novalidate>
        <div class="col-xs-12">
            <h2>Add a new item</h2>
        </div>
        <div class="col-xs-2">
            <label>Image</label>
            <div class="thumbnail drag-drop-field"
                 ngf-drop
                 ngf-select
                 ngf-drag-over-class="dragover"
                 ng-model="itemsCtrl.item.file"
                 name="file"
                 accept="image/*"
                 ngf-max-size="2MB">
                <span ng-hide="itemsCtrl.item.file" class="drag-drop-field__message">
                    <i class="glyphicon glyphicon-download-alt"></i>
                    <p>Drag & Drop, or click to download.</p>
                </span>
                <img ng-show="form.file.$valid"
                     ngf-src="!itemsCtrl.item.file.$error && itemsCtrl.item.file">
            </div>
        </div>
        <div class="col-xs-5">
            <div class="form-group">
                <label for="ItemTitle">Title</label>
                <input type="text"
                       class="form-control"
                       id="ItemTitle"
                       placeholder="Title"
                       ng-model="itemsCtrl.item.title"
                       required>
            </div>
            <div class="form-group">
                <label for="ItemPrice">Price</label>
                <div class="input-group">
                    <span class="input-group-addon">$</span>
                    <input type="text"
                           class="form-control"
                           id="ItemPrice"
                           placeholder="Price"
                           ng-model="itemsCtrl.item.price"
                           required>
                </div>
            </div>
        </div>

        <div class="col-xs-5">
            <div class="form-group">
                <label for="ItemDescription">Description</label>
                <textarea class="form-control"
                          id="ItemDescription"
                          rows="5"
                          placeholder="Description"
                          ng-model="itemsCtrl.item.description"
                          required></textarea>
            </div>
            <button type="submit"
                    ng-disabled="!form.$valid"
                    class="btn btn-primary"
                    ng-click="itemsCtrl.addItem()">Add item</button>
        </div>
        <div class="col-xs-12"
             ng-show="itemsCtrl.error.flag">
            <div class="panel panel-warning">
                <div class="panel-heading">
                    <h3 class="panel-title">Error occured</h3>
                </div>
                <div class="panel-body">
                    {{itemsCtrl.error.message}}
                </div>
            </div>
        </div>
    </form>
</div>
<hr/>

<h2 class="sub-header">All items</h2>
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
        <tr>
            <th>#</th>
            <th>Image</th>
            <th>Title</th>
            <th>Description</th>
            <th>Price</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="item in itemsCtrl.items | orderBy:true:true">
            <td>{{ $index + 1 }}</td>
            <td><a href="#/admin/items/{{item._id}}">
                <span class="item-edit-thumbnail">
                    <span class="item-edit-mask">
                        <i class="glyphicon glyphicon-edit">
                            <span class="small">Edit</span>
                        </i>
                    </span>
                    <img ng-src="{{item.imageURL}}" alt=""/>
                </span>
            </a></td>
            <td>{{ item.title }}</td>
            <td>{{ item.shortDescription }}</td>
            <td>{{ item.price }}</td>
            <td ng-click="itemsCtrl.deleteItem(item)">
                <button class="btn btn-default">X</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>

